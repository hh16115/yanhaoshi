<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>canvas</title>

<style type="text/css">
    #canvasId {
        background-color: #f1f1f1;
    }
</style>

</head>
<body>

<canvas id="canvasId" width="300px" height="400px">
    
</canvas>

<script src="js/base/zepto-1.2.0.min.js"></script>
<script>
    
    /**
     * 初始化
     * @return {[type]} [description]
     */
    function init () {
        var cxt = $('#canvasId')[0].getContext("2d");
        loadImg([''], function (imgs) {
            drawZan(cxt, imgs[0]);
        });
    }

    /**
     * 加载图片
     * @param  {[type]}   src      [description]
     * @param  {Function} callback [description]
     * @return {[type]}            [description]
     */
    function loadImg (srcs, callback) {
        var isAllLoadNum = 0;
        for (var i = 0; i < srcs.length; i++) {
            var img = new Image();
            img.onload = function () {
                isAllLoadNum++;
                if (isAllLoadNum >= srcs.length) {
                    callback(srcs);
                }
            };
            img.src = src;
        }
    }

    function drawZan (cxt, img) {
        cxt.beginPath();
        var pattern = context.createPattern(img, "no-repeat");
        cxt.arc(50, 50, 15, 0, Math.PI*2, true);
        cxt.closePath();
        context.fillStyle = pattern;
        cxt.fill();
    }

    init();

</script>

</body>
</html>
